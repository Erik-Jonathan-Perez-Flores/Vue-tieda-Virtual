{"remainingRequest":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/babel-loader/lib/index.js!/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/EditCategory.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/EditCategory.vue","mtime":1635297296000},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/babel-loader/lib/index.js","mtime":1635304629563},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js","mtime":1635304629775}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBEcmFnIGZyb20gJ0AvY29tcG9uZW50cy9hZG1pbi9EcmFnSW1hZ2VBZG1pbic7CmltcG9ydCBEaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL0RpYWxvZ01lc3NhZ2UnOwppbXBvcnQgcXMgZnJvbSAncXMnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IFsnaWQnXSwKICBjb21wb25lbnRzOiB7CiAgICBEcmFnOiBEcmFnLAogICAgRGlhbG9nOiBEaWFsb2cKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiAnJywKICAgICAgbmFtZVJ1bGVzOiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gISF2IHx8ICdFbCBub21icmUgZXMgcmVxdWVyaWRvJzsKICAgICAgfV0sCiAgICAgIG15SW1nOiBudWxsLAogICAgICBtZXNzYWdlOiAnJywKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgcmVkaXI6IGZhbHNlLAogICAgICBwYXRoOiAnJywKICAgICAgZGlhbG9nMjogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbWc6IGZ1bmN0aW9uIGltZyhmaWxlKSB7CiAgICAgIHRoaXMubXlJbWcgPSBmaWxlLmltYWdlOwogICAgfSwKICAgIHNlbmQ6IGZ1bmN0aW9uIHNlbmQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICBpZiAodGhpcy5teUltZyA9PSBudWxsKSB7CiAgICAgICAgICB0aGlzLmF4aW9zKHsKICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLAogICAgICAgICAgICBkYXRhOiBxcy5zdHJpbmdpZnkoewogICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZQogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdXJsOiAnL2NhdGVnb3J5LycgKyB0aGlzLmlkCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBfdGhpcy5kaWFsb2cgPSB0cnVlOwogICAgICAgICAgICBfdGhpcy5tZXNzYWdlID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlICsgJyc7CiAgICAgICAgICAgIF90aGlzLnJlZGlyID0gcmVzcG9uc2UuZGF0YS5zdGF0dXM7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIF90aGlzLmRpYWxvZyA9IHRydWU7CgogICAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgX3RoaXMubWVzc2FnZSA9IGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMubWVzc2FnZSA9ICdFcnJvciBlbiBsYSByZXNwdWVzdGEnOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ25hbWUnLCB0aGlzLm5hbWUpOwogICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdpbWcnLCB0aGlzLm15SW1nKTsKICAgICAgICAgIHRoaXMuYXhpb3MoewogICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsCiAgICAgICAgICAgIGRhdGE6IGZvcm1EYXRhLAogICAgICAgICAgICB1cmw6ICcvY2F0ZWdvcnkvJyArIHRoaXMuaWQKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIF90aGlzLmRpYWxvZyA9IHRydWU7CiAgICAgICAgICAgIF90aGlzLm1lc3NhZ2UgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2UgKyAnJzsKICAgICAgICAgICAgX3RoaXMucmVkaXIgPSByZXNwb25zZS5kYXRhLnN0YXR1czsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgX3RoaXMuZGlhbG9nID0gdHJ1ZTsKCiAgICAgICAgICAgIGlmIChlcnIucmVzcG9uc2UpIHsKICAgICAgICAgICAgICBfdGhpcy5tZXNzYWdlID0gZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpcy5tZXNzYWdlID0gJ0Vycm9yIGVuIGxhIHJlc3B1ZXN0YSc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKTsKICAgICAgfQogICAgfSwKICAgIG9rOiBmdW5jdGlvbiBvaygpIHsKICAgICAgaWYgKHRoaXMucmVkaXIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2NhdGVnb3J5bGlzdCcpOwogICAgICB9CgogICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlOwogICAgfSwKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICBkYXRhOiBudWxsLAogICAgICAgIHVybDogJy9jYXRlZ29yeS8nICsgdGhpcy5pZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgX3RoaXMyLm5hbWUgPSByZXNwLm5hbWU7CiAgICAgICAgX3RoaXMyLnBhdGggPSByZXNwLnBhdGg7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBvcGVuSW1nOiBmdW5jdGlvbiBvcGVuSW1nKCkgewogICAgICB0aGlzLmRpYWxvZzIgPSB0cnVlOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0KfTs="},{"version":3,"sources":["EditCategory.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <v-container>\n        <v-row>\n            <v-col cols=\"12\">\n                <h1>Editar Categoría</h1>\n            </v-col>\n            <v-col cols=\"12\" class=\"d-flex justify-center\">\n                <v-card width=\"500\" elevation=\"15\">\n                    <v-card-text>\n                        <v-form\n                            ref=\"form\"\n                            lazy-validation\n                        >\n                            <v-row>\n                                <v-col cols=\"12\">\n                                    <h2 class=\"accent--text text-center\">Inserte una imagen para reemplazar la actual</h2>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"d-flex justify-center\">\n                                    <Drag\n                                        @drop-item=\"img\"\n                                    />\n                                </v-col>\n                                <v-col cols=\"12\">\n                                    <h3 class=\"accent--text text-center\">Imagen actual</h3>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"d-flex justify-center\">\n                                    <img @click=\"openImg\" width=\"70\" height=\"70\" :src=\"path\" style=\"cursor:pointer\"/>\n                                </v-col>\n                                <v-col cols=\"12\">\n                                    <v-text-field\n                                        v-model=\"name\"\n                                        :rules=\"nameRules\"\n                                        label=\"Nombre de la categoría\"\n                                        required\n                                        outlined\n                                        dense\n                                    ></v-text-field>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"d-flex justify-center\">\n                                    <v-btn large color=\"secondary\" @click=\"send\">Enviar</v-btn>\n                                </v-col>\n                            </v-row>\n                        </v-form>\n                    </v-card-text>\n                </v-card>\n            </v-col>\n        </v-row>\n        <v-dialog\n            v-model=\"dialog2\"\n            width=\"400\"\n        >\n            <v-card>\n                <v-img :src=\"path\" height=\"400\"></v-img>\n            </v-card>\n        </v-dialog>\n        <Dialog\n            :message=\"message\"\n            :dialog=\"dialog\"\n            :redir=\"redir\"\n            @ok-template=\"ok\"\n        />\n    </v-container>\n</template>\n\n\n<script>\n\nimport Drag from '@/components/admin/DragImageAdmin';\nimport Dialog from '@/components/DialogMessage';\nimport qs from 'qs';\n\nexport default {\n    props:['id'],\n    components:{\n        Drag,Dialog\n    },\n    data() {\n        return{\n            name:'',\n            nameRules: [\n                v => !!v || 'El nombre es requerido',\n            ],\n            myImg:null,\n            message:'',\n            dialog:false,\n            redir:false,\n            path:'',\n            dialog2:false,\n        }\n    },\n    methods:{\n        img(file){\n            this.myImg=file.image;\n        },\n        send(){\n            if(this.$refs.form.validate()){\n                if(this.myImg==null){\n                    this.axios({\n                        method: 'PATCH',\n                        data:qs.stringify({\n                            name:this.name,\n                        }),\n                        url:'/category/'+this.id,\n                    }).then(response=>{\n                        this.dialog=true;\n                        this.message=response.data.message+'';\n                        this.redir=response.data.status;\n                    }).catch(err=>{\n                        this.dialog=true;\n                        if (err.response) {\n                            this.message=err.response.data.message;\n                        }else{\n                            this.message='Error en la respuesta';\n                        }\n                    });\n                }else{\n                    let formData=new FormData();\n                    formData.append('name',this.name);\n                    formData.append('img',this.myImg);\n                    this.axios({\n                        method: 'PATCH',\n                        data:formData,\n                        url:'/category/'+this.id,\n                    }).then(response=>{\n                        this.dialog=true;\n                        this.message=response.data.message+'';\n                        this.redir=response.data.status;\n                    }).catch(err=>{\n                        this.dialog=true;\n                        if (err.response) {\n                            this.message=err.response.data.message;\n                        }else{\n                            this.message='Error en la respuesta';\n                        }\n                    });\n                }\n            }else{\n                this.$refs.form.validate();\n            }\n        },\n        ok(){\n            if(this.redir){\n                this.$router.push('/categorylist');\n            }\n            this.dialog=false;\n        },\n        init(){\n            this.axios({\n                method: 'GET',\n                data:null,\n                url:'/category/'+this.id,\n            }).then(response=>response.data)\n            .then(resp=>{\n                this.name=resp.name;\n                this.path=resp.path;\n            })\n            .catch(err=>{\n                console.log(err);\n            });\n        },\n        openImg(){\n            this.dialog2=true;\n        }\n    },\n    created(){\n        this.init();\n    }\n}\n</script>"],"sourceRoot":"src/views/admin/data"}]}