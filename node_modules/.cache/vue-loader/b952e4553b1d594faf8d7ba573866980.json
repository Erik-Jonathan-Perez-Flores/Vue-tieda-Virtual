{"remainingRequest":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/TechnicalService.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/TechnicalService.vue","mtime":1635297296000},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/babel-loader/lib/index.js","mtime":1635304629563},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js","mtime":1635304629775}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgRGlhbG9nIGZyb20gJ0AvY29tcG9uZW50cy9EaWFsb2dNZXNzYWdlJzsKaW1wb3J0IHFzIGZyb20gJ3FzJzsKaW1wb3J0IFNlYXJjaCBmcm9tICdAL2NvbXBvbmVudHMvYWRtaW4vU2VhcmNoJzsKaW1wb3J0IHsgbWRpRGF0YWJhc2VSZWZyZXNoIH0gZnJvbSAnQG1kaS9qcyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBjb21wb25lbnRzOnsKICAgICAgICBEaWFsb2csU2VhcmNoCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHJlcG9ydHM6W10sCiAgICAgICAgICAgIHNjcm9sbEJvdHRvbTpmYWxzZSwKICAgICAgICAgICAgZGlhbG9nOmZhbHNlLAogICAgICAgICAgICBkaWFsb2cyOmZhbHNlLAogICAgICAgICAgICByZWRpcjpmYWxzZSwKICAgICAgICAgICAgbWVzc2FnZTonJywKICAgICAgICAgICAgYWN0aXZlOmZhbHNlLAogICAgICAgICAgICBzY3JvbGxCb3R0b206ZmFsc2UsCiAgICAgICAgICAgIE9wSTonJywKICAgICAgICAgICAgaWNvbkRhdGFiYXNlOm1kaURhdGFiYXNlUmVmcmVzaCwKCiAgICAgICAgICAgIHNlYXJjaDonJywKICAgICAgICAgICAgc2tpcDowLAogICAgICAgICAgICBsaW1pdDoxMCwKICAgICAgICAgICAgY2FsbEFwaTp0cnVlLAogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkICgpIHsKICAgICAgICB0aGlzLnNjcm9sbCgpOwogICAgfSwKICAgIGNvbXB1dGVkOnsKCiAgICB9LAogICAgbWV0aG9kczp7CiAgICAgICAgbm93KHgpewogICAgICAgICAgICByZXR1cm4gdGhpcy4kbW9tZW50KHgpLmZyb21Ob3coKTsKICAgICAgICB9LAogICAgICAgIGhvdXIoeCl7CiAgICAgICAgICAgIGxldCBkPW5ldyBEYXRlKHgpOwogICAgICAgICAgICByZXR1cm4gKGQuZ2V0SG91cnMoKTwxMD8nMCcrZC5nZXRIb3VycygpOmQuZ2V0SG91cnMoKSkrJzonKyhkLmdldE1pbnV0ZXMoKTwxMD8nMCcrZC5nZXRNaW51dGVzKCk6ZC5nZXRNaW51dGVzKCkpOwogICAgICAgIH0sCiAgICAgICAgb3BlbkltZyh4KXsKICAgICAgICAgICAgdGhpcy5kaWFsb2cyPXRydWU7CiAgICAgICAgICAgIHRoaXMuT3BJPXg7CiAgICAgICAgfSwKICAgICAgICBzY3JvbGwoKXsKICAgICAgICAgICAgd2luZG93Lm9uc2Nyb2xsID0gKCkgPT4gewogICAgICAgICAgICAgICAgbGV0IGJvdHRvbU9mV2luZG93ID0gTWF0aC5tYXgod2luZG93LnBhZ2VZT2Zmc2V0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCkgKyB3aW5kb3cuaW5uZXJIZWlnaHQgPT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQ7CiAgICAgICAgICAgICAgICBpZiAoYm90dG9tT2ZXaW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbEJvdHRvbT10cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBpbml0KCl7CiAgICAgICAgICAgIGlmKCF0aGlzLmNhbGxBcGkpcmV0dXJuOwogICAgICAgICAgICB0aGlzLmNhbGxBcGk9ZmFsc2U7CiAgICAgICAgICAgIHRoaXMuYXhpb3MoewogICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgICAgIGRhdGE6bnVsbCwKICAgICAgICAgICAgICAgIHVybDonL3NlcnY/c2tpcD0nK3RoaXMuc2tpcCsnJmxpbWl0PScrdGhpcy5saW1pdCsnJnNlYXJjaD0nK3RoaXMuc2VhcmNoLAogICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlPT57CiAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmxlbmd0aD09MCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsQXBpPWZhbHNlOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuY2FsbEFwaT10cnVlOwogICAgICAgICAgICAgICAgdGhpcy5yZXBvcnRzPXRoaXMucmVwb3J0cy5jb25jYXQocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB0aGlzLnNraXArPXRoaXMubGltaXQ7CiAgICAgICAgICAgIH0pLmNhdGNoKGVycj0+ewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICB0b01vZGVsKGl0KXsKICAgICAgICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsCiAgICAgICAgICAgICAgICBkYXRhOnFzLnN0cmluZ2lmeSh7c3RhdGU6IWl0LnN0YXRlfSksCiAgICAgICAgICAgICAgICB1cmw6Jy9zZXJ2LycraXQuX2lkLAogICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlPT57CiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZz10cnVlOwogICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlPXJlc3BvbnNlLmRhdGEubWVzc2FnZSsnJzsKICAgICAgICAgICAgICAgIHRoaXMucmVkaXI9cmVzcG9uc2UuZGF0YS5zdGF0dXM7CiAgICAgICAgICAgICAgICBpdC5zdGF0ZT0haXQuc3RhdGU7CiAgICAgICAgICAgIH0pLmNhdGNoKGVycj0+ewogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2c9dHJ1ZTsKICAgICAgICAgICAgICAgIGlmIChlcnIucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2U9ZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZT0nRXJyb3IgZW4gbGEgcmVzcHVlc3RhJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBvaygpewogICAgICAgICAgICB0aGlzLmRpYWxvZz1mYWxzZTsKICAgICAgICB9LAogICAgICAgIHRleHRRdWVyeShvYil7CiAgICAgICAgICAgIHRoaXMuc2VhcmNoPW9iLnRleHQ7CiAgICAgICAgICAgIHRoaXMuc2tpcD0wOwogICAgICAgICAgICB0aGlzLmNhbGxBcGk9dHJ1ZTsKICAgICAgICAgICAgdGhpcy5yZXBvcnRzPVtdOwogICAgICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpewogICAgICAgIHRoaXMuaW5pdCgpOwogICAgfQp9Cg=="},{"version":3,"sources":["TechnicalService.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TechnicalService.vue","sourceRoot":"src/views/admin/data","sourcesContent":["<template>\n    <v-container>\n        <v-row>\n            <v-col cols=\"12\">\n                <h1>Pendientes para consultas:</h1>\n            </v-col>\n            <v-col cols=\"12\">\n                <Search\n                    :place=\"'Busca alguna consulta...'\"\n                    @search-text=\"textQuery\"\n                />\n            </v-col>\n            <v-col cols=\"12\" v-if=\"reports.length>0\">\n                <v-simple-table>\n                    <template v-slot:default>\n                        <thead>\n                        <tr>\n                            <th class=\"text-left\">\n                                Nro\n                            </th>\n                            <th class=\"text-left\">\n                                Nombre\n                            </th>\n                            <th class=\"text-left\">\n                                Teléfono\n                            </th>\n                            <th class=\"text-left\">\n                                Correo\n                            </th>\n                            <th class=\"text-left\">\n                                Descripción de la falla\n                            </th>\n                            <th class=\"text-left\">\n                                Fecha\n                            </th>\n                            <th class=\"text-left\">\n                                Hora de la cita\n                            </th>\n                            <th class=\"text-left\">\n                                Imagen\n                            </th>\n                            <th class=\"text-left\">\n                                Acción\n                            </th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr\n                            v-for=\"(item,index) in reports\"\n                            :key=\"index\"\n                        >\n                            <td>{{index+1}}</td>\n                            <td>{{ item.name }}</td>\n                            <td>{{ item.phone }}</td>\n                            <td>{{ item.email }}</td>\n                            <td>{{ item.description }}</td>\n                            <td>{{ now(item.date) }}</td>\n                            <td>{{ hour(item.date) }}</td>\n                            <td><img :src=\"item.path\" width=\"50\" height=\"50\" @click=\"openImg(item.path)\" style=\"cursor:pointer\"/></td>\n                            <td>\n                                <v-btn small @click=\"toModel(item,index)\">{{item.state?'Abierto':'Cerrado'}}</v-btn>\n                            </td>\n                        </tr>\n                        </tbody>\n                    </template>\n                </v-simple-table>\n            </v-col>\n            <v-col cols=\"12\" class=\"d-flex justify-center\" v-else>\n                <v-icon size=\"200\" color=\"accent\">{{iconDatabase}}</v-icon>\n            </v-col>\n        </v-row>\n        <Dialog\n            :message=\"message\"\n            :dialog=\"dialog\"\n            :redir=\"redir\"\n            @ok-template=\"ok\"\n        />\n        <v-dialog\n            v-model=\"dialog2\"\n            width=\"400\"\n        >\n            <v-card>\n                <v-img :src=\"OpI\" height=\"400\"></v-img>\n            </v-card>\n        </v-dialog>\n    </v-container>\n</template>\n\n<script>\n\nimport Dialog from '@/components/DialogMessage';\nimport qs from 'qs';\nimport Search from '@/components/admin/Search';\nimport { mdiDatabaseRefresh } from '@mdi/js';\n\nexport default {\n    components:{\n        Dialog,Search\n    },\n    data() {\n        return{\n            reports:[],\n            scrollBottom:false,\n            dialog:false,\n            dialog2:false,\n            redir:false,\n            message:'',\n            active:false,\n            scrollBottom:false,\n            OpI:'',\n            iconDatabase:mdiDatabaseRefresh,\n\n            search:'',\n            skip:0,\n            limit:10,\n            callApi:true,\n        }\n    },\n    mounted () {\n        this.scroll();\n    },\n    computed:{\n\n    },\n    methods:{\n        now(x){\n            return this.$moment(x).fromNow();\n        },\n        hour(x){\n            let d=new Date(x);\n            return (d.getHours()<10?'0'+d.getHours():d.getHours())+':'+(d.getMinutes()<10?'0'+d.getMinutes():d.getMinutes());\n        },\n        openImg(x){\n            this.dialog2=true;\n            this.OpI=x;\n        },\n        scroll(){\n            window.onscroll = () => {\n                let bottomOfWindow = Math.max(window.pageYOffset, document.documentElement.scrollTop, document.body.scrollTop) + window.innerHeight === document.documentElement.offsetHeight;\n                if (bottomOfWindow) {\n                    this.scrollBottom=true;\n                    this.init();\n                }\n            }\n        },\n        init(){\n            if(!this.callApi)return;\n            this.callApi=false;\n            this.axios({\n                method: 'GET',\n                data:null,\n                url:'/serv?skip='+this.skip+'&limit='+this.limit+'&search='+this.search,\n            }).then(response=>{\n                if(response.data.length==0){\n                    this.callApi=false;\n                    return;\n                }\n                this.callApi=true;\n                this.reports=this.reports.concat(response.data);\n                this.skip+=this.limit;\n            }).catch(err=>{\n                console.log(err);\n            });\n        },\n        toModel(it){\n            this.axios({\n                method: 'PATCH',\n                data:qs.stringify({state:!it.state}),\n                url:'/serv/'+it._id,\n            }).then(response=>{\n                this.dialog=true;\n                this.message=response.data.message+'';\n                this.redir=response.data.status;\n                it.state=!it.state;\n            }).catch(err=>{\n                this.dialog=true;\n                if (err.response) {\n                    this.message=err.response.data.message;\n                }else{\n                    this.message='Error en la respuesta';\n                }\n            });\n        },\n        ok(){\n            this.dialog=false;\n        },\n        textQuery(ob){\n            this.search=ob.text;\n            this.skip=0;\n            this.callApi=true;\n            this.reports=[];\n            this.init();\n        }\n    },\n    created(){\n        this.init();\n    }\n}\n</script>"]}]}