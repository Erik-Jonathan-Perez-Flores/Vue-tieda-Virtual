{"remainingRequest":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/EditProduct.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/EditProduct.vue","mtime":1635297296000},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/babel-loader/lib/index.js","mtime":1635304629563},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js","mtime":1635304629775}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBJbWFnZXMgZnJvbSAnQC9jb21wb25lbnRzL2FkbWluL0RyYWdJbWFnZXMnOwppbXBvcnQgQ2F0ZWdvcnkgZnJvbSAnQC9jb21wb25lbnRzL2FkbWluL1NlYXJjaENhdGVnb3J5JzsKaW1wb3J0IHsgbWRpQ2xvc2VPY3RhZ29uIH0gZnJvbSAnQG1kaS9qcyc7CmltcG9ydCBEaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL0RpYWxvZ01lc3NhZ2UnOwoKZXhwb3J0IGRlZmF1bHQgewogICAgcHJvcHM6WydpZCddLAogICAgY29tcG9uZW50czp7CiAgICAgICAgSW1hZ2VzLENhdGVnb3J5LERpYWxvZwogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICBjbG9zZUltZzptZGlDbG9zZU9jdGFnb24sCiAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICBuYW1lUnVsZXM6IFsKICAgICAgICAgICAgICAgIHYgPT4gISF2IHx8ICdFbCBub21icmUgZXMgcmVxdWVyaWRvJywKICAgICAgICAgICAgXSwKICAgICAgICAgICAgcXVhbnRpdHk6ICcnLAogICAgICAgICAgICBxdWFudGl0eVJ1bGVzOiBbCiAgICAgICAgICAgICAgICB2ID0+ICEhdiB8fCAnTGEgY2FudGlkYWQgZXMgcmV1cXJpZGEnLAogICAgICAgICAgICBdLAogICAgICAgICAgICBwcmljZTogJycsCiAgICAgICAgICAgIHByaWNlUnVsZXM6IFsKICAgICAgICAgICAgICAgIHYgPT4gISF2IHx8ICdFbCBwcmVjaW8gZXMgcmVxdWVyaWRvJywKICAgICAgICAgICAgXSwKICAgICAgICAgICAgZGlzY291bnQ6ICcnLAogICAgICAgICAgICBkaXNjb3VudFJ1bGVzOiBbCiAgICAgICAgICAgICAgICB2ID0+ICEhdiB8fCAnRWwgY29zdG8gZXMgcmVxdWVyaWRvJywKICAgICAgICAgICAgXSwKICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgICAgICBkZXNjcmlwdGlvblJ1bGVzOiBbCiAgICAgICAgICAgICAgICB2ID0+ICEhdiB8fCAnTGEgZGVzY3JpcGNpw7NuIGVzIHJlcXVlcmlkYScsCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGNhdGVnb3J5OicnLAogICAgICAgICAgICBtZXNzYWdlOicnLAogICAgICAgICAgICBkaWFsb2c6ZmFsc2UsCiAgICAgICAgICAgIHJlZGlyOmZhbHNlLAogICAgICAgICAgICBmaWxlc0ltZzpbXSwKICAgICAgICAgICAgZmlsZXNBcGk6W10KICAgICAgICAgICAgCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIGNhdChkYXRhKXsKICAgICAgICAgICAgdGhpcy5jYXRlZ29yeT1kYXRhLl9pZD9kYXRhLl9pZDonJzsKICAgICAgICB9LAogICAgICAgIHNhdmVQcm9kdWN0KCl7CiAgICAgICAgICAgIGlmKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKXsKICAgICAgICAgICAgICAgIGlmKHRoaXMuY2F0ZWdvcnk9PScnKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZz10cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZT0nU2UgcmVxdWllcmUgbGEgY2F0ZWdvcsOsYSBhIGxhIHF1ZSBwZXJ0ZW5lY2UgZWwgcHJvZHVjdG8nOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgbGV0IGZvcm1EYXRhPW5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnbmFtZScsdGhpcy5uYW1lKTsKICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3ByaWNlJyx0aGlzLnByaWNlKTsKICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2Rpc2NvdW50Jyx0aGlzLmRpc2NvdW50KTsKICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3F1YW50aXR5Jyx0aGlzLnF1YW50aXR5KTsKICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2NhdGVnb3J5Jyx0aGlzLmNhdGVnb3J5KTsKICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2Rlc2NyaXB0aW9uJyx0aGlzLmRlc2NyaXB0aW9uKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuZmlsZXNJbWcubGVuZ3RoOyB4KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZmlsZXNJbWdbeF07CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnaW1nJyxlbGVtZW50KTsgICAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTpmb3JtRGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOicvcHJvZHVjdC8nK3RoaXMuaWQsCiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZT0+ewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZz10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2U9cmVzcG9uc2UuZGF0YS5tZXNzYWdlKycnOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZGlyPXJlc3BvbnNlLmRhdGEuc3RhdHVzOwogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVycj0+ewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZz10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2U9ZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2U9J0Vycm9yIGVuIGxhIHJlc3B1ZXN0YSc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb2soKXsKICAgICAgICAgICAgaWYodGhpcy5yZWRpcil7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3Byb2R1Y3RsaXN0YWRtJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5kaWFsb2c9ZmFsc2U7CiAgICAgICAgfSwKICAgICAgICBteUltYWdlcyhpbSl7CiAgICAgICAgICAgIHRoaXMuZmlsZXNJbWc9dGhpcy5maWxlc0ltZy5jb25jYXQoaW0uZGF0YSk7CiAgICAgICAgfSwKICAgICAgICByZW1vdmVJbWcob2JqKXsKICAgICAgICAgICAgdGhpcy5maWxlc0ltZy5zcGxpY2Uob2JqLnBvcywxKTsKICAgICAgICB9LAogICAgICAgIGluaXQoKXsKICAgICAgICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgZGF0YTpudWxsLAogICAgICAgICAgICAgICAgdXJsOicvcHJvZHVjdC9vbmUvJyt0aGlzLmlkLAogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmRhdGEpCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlPT57CiAgICAgICAgICAgICAgICB0aGlzLm5hbWU9cmVzcG9uc2UubmFtZTsKICAgICAgICAgICAgICAgIHRoaXMucXVhbnRpdHk9cmVzcG9uc2UucXVhbnRpdHk7CiAgICAgICAgICAgICAgICB0aGlzLnByaWNlPXJlc3BvbnNlLnByaWNlOwogICAgICAgICAgICAgICAgdGhpcy5kaXNjb3VudD1yZXNwb25zZS5kaXNjb3VudDsKICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWU9cmVzcG9uc2UuY2F0ZWdvcnk7CiAgICAgICAgICAgICAgICB0aGlzLmZpbGVzQXBpPXJlc3BvbnNlLmdhbGxlcnk7CiAgICAgICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uPXJlc3BvbnNlLmRlc2NyaXB0aW9uOwogICAgICAgICAgICB9KS5jYXRjaChlcnI9PnsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBkZWxldGVJbWdTZXJ2ZXIoaSxpZCl7CiAgICAgICAgICAgIHRoaXMuYXhpb3MoewogICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJywKICAgICAgICAgICAgICAgIGRhdGE6bnVsbCwKICAgICAgICAgICAgICAgIHVybDonL3Byb2R1Y3QvaW1nLycraWQsCiAgICAgICAgICAgIH0pLnRoZW4ocmVzcG9uc2U9PnsKICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nPXRydWU7CiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2U9cmVzcG9uc2UuZGF0YS5tZXNzYWdlKycnOwogICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5zdGF0dXMpewogICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZXNBcGkuc3BsaWNlKGksMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGVycj0+ewogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2c9dHJ1ZTsKICAgICAgICAgICAgICAgIGlmIChlcnIucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2U9ZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZT0nRXJyb3IgZW4gbGEgcmVzcHVlc3RhJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKXsKICAgICAgICB0aGlzLmluaXQoKTsKICAgIH0KfQo="},{"version":3,"sources":["EditProduct.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditProduct.vue","sourceRoot":"src/views/admin/data","sourcesContent":["<template>\n    <v-container class=\"d-flex justify-center\">\n        <v-card elevation=\"15\" width=\"700\">\n            <v-card-text>\n                <v-form\n                    ref=\"form\"\n                    lazy-validation\n                >\n                    <v-row>\n                        <v-col cols=\"12\" class=\"pa-1\">\n                            <h1 class=\"accent--text text-center\">Edite el producto</h1>\n                        </v-col>\n                        <v-col cols=\"12\" class=\"pa-1\">\n                            <v-card color=\"primary\" class=\"pa-1\">\n                                <Images\n                                    @drag-images=\"myImages\"\n                                    @remove-element=\"removeImg\"\n                                />\n                            </v-card>\n                        </v-col>\n                        <v-col cols=\"12\" class=\"mb-5\">\n                            <h1 class=\"primary--text text-center\">Imágenes que ya están en el servidor</h1>\n                        </v-col>\n                        <v-col cols=\"12\">\n                            <v-row justify=\"center\">\n                                <v-card v-for=\"(it,z) in filesApi\" :key=\"z\" class=\"pa-1 ma-1\" color=\"primary\">\n                                    <v-img :src=\"it.path\" width=\"200\" height=\"200\"/>\n                                    <v-btn @click=\"deleteImgServer(z,it._id)\"  x-small fab absolute top right color=\"primary\">\n                                        <v-icon>{{closeImg}}</v-icon>\n                                    </v-btn>\n                                </v-card>\n                            </v-row>\n                        </v-col>\n                        <v-col cols=\"12\" class=\"pa-1\">\n                            <v-text-field\n                                v-model=\"name\"\n                                :rules=\"nameRules\"\n                                label=\"Nombre\"\n                                dense\n                                outlined\n                            >\n                            </v-text-field>\n                        </v-col>\n                        <v-col cols=\"12\" sm=\"6\" class=\"pa-1\">\n                            <v-text-field\n                                v-model=\"quantity\"\n                                :rules=\"quantityRules\"\n                                label=\"Cantidad\"\n                                type=\"number\"\n                                dense\n                                outlined\n                            >\n                            </v-text-field>\n                        </v-col>\n                        <v-col cols=\"12\" sm=\"6\" class=\"pa-1\">\n                            <Category\n                                @charge-category=\"cat\"\n                            />\n                        </v-col>\n                        <v-col cols=\"12\" sm=\"6\" class=\"pa-1\">\n                            <v-text-field\n                                v-model=\"price\"\n                                :rules=\"priceRules\"\n                                label=\"Precio venta BOB\"\n                                dense\n                                outlined\n                            >\n                            </v-text-field>\n                        </v-col>\n                        <v-col cols=\"12\" sm=\"6\" class=\"pa-1\">\n                            <v-text-field\n                                v-model=\"discount\"\n                                :rules=\"discountRules\"\n                                label=\"Descuento BOB\"\n                                dense\n                                outlined \n                            >\n                            </v-text-field>\n                        </v-col>\n                        <v-col cols=\"12\" class=\"pa-1\">\n                            <v-textarea\n                                v-model=\"description\"\n                                :rules=\"descriptionRules\"\n                                label=\"Descripción\"\n                                dense\n                                outlined\n                            >\n                            </v-textarea>\n                        </v-col>\n                        <v-col cols=\"12\" class=\"d-flex justify-center\">\n                            <v-btn color=\"secondary\" large @click=\"saveProduct\">Editar</v-btn>\n                        </v-col>\n                    </v-row>\n                </v-form>\n            </v-card-text>\n        </v-card>\n        <Dialog\n            :message=\"message\"\n            :dialog=\"dialog\"\n            :redir=\"redir\"\n            @ok-template=\"ok\"\n        />\n    </v-container>\n</template>\n\n\n<script>\nimport Images from '@/components/admin/DragImages';\nimport Category from '@/components/admin/SearchCategory';\nimport { mdiCloseOctagon } from '@mdi/js';\nimport Dialog from '@/components/DialogMessage';\n\nexport default {\n    props:['id'],\n    components:{\n        Images,Category,Dialog\n    },\n    data() {\n        return{\n            closeImg:mdiCloseOctagon,\n            name: '',\n            nameRules: [\n                v => !!v || 'El nombre es requerido',\n            ],\n            quantity: '',\n            quantityRules: [\n                v => !!v || 'La cantidad es reuqrida',\n            ],\n            price: '',\n            priceRules: [\n                v => !!v || 'El precio es requerido',\n            ],\n            discount: '',\n            discountRules: [\n                v => !!v || 'El costo es requerido',\n            ],\n            description: '',\n            descriptionRules: [\n                v => !!v || 'La descripción es requerida',\n            ],\n            category:'',\n            message:'',\n            dialog:false,\n            redir:false,\n            filesImg:[],\n            filesApi:[]\n            \n        }\n    },\n    methods:{\n        cat(data){\n            this.category=data._id?data._id:'';\n        },\n        saveProduct(){\n            if(this.$refs.form.validate()){\n                if(this.category==''){\n                    this.dialog=true;\n                    this.message='Se requiere la categorìa a la que pertenece el producto';\n                }else{\n                    let formData=new FormData();\n                    formData.append('name',this.name);\n                    formData.append('price',this.price);\n                    formData.append('discount',this.discount);\n                    formData.append('quantity',this.quantity);\n                    formData.append('category',this.category);\n                    formData.append('description',this.description);\n                    for (let x = 0; x < this.filesImg.length; x++) {\n                        const element = this.filesImg[x];\n                        formData.append('img',element);   \n                    }\n                    this.axios({\n                        method: 'PATCH',\n                        data:formData,\n                        url:'/product/'+this.id,\n                    }).then(response=>{\n                        this.dialog=true;\n                        this.message=response.data.message+'';\n                        this.redir=response.data.status;\n                    }).catch(err=>{\n                        this.dialog=true;\n                        if (err.response) {\n                            this.message=err.response.data.message;\n                        }else{\n                            this.message='Error en la respuesta';\n                        }\n                    });\n                }\n            }else{\n                this.$refs.form.validate();\n            }\n        },\n        ok(){\n            if(this.redir){\n                this.$router.push('/productlistadm');\n            }\n            this.dialog=false;\n        },\n        myImages(im){\n            this.filesImg=this.filesImg.concat(im.data);\n        },\n        removeImg(obj){\n            this.filesImg.splice(obj.pos,1);\n        },\n        init(){\n            this.axios({\n                method: 'GET',\n                data:null,\n                url:'/product/one/'+this.id,\n            })\n            .then(res => res.data)\n            .then(response=>{\n                this.name=response.name;\n                this.quantity=response.quantity;\n                this.price=response.price;\n                this.discount=response.discount;\n                this.categorySee=response.category;\n                this.filesApi=response.gallery;\n                this.description=response.description;\n            }).catch(err=>{\n                console.log(err)\n            });\n        },\n        deleteImgServer(i,id){\n            this.axios({\n                method: 'DELETE',\n                data:null,\n                url:'/product/img/'+id,\n            }).then(response=>{\n                this.dialog=true;\n                this.message=response.data.message+'';\n                if(response.data.status){\n                    this.filesApi.splice(i,1);\n                }\n            }).catch(err=>{\n                this.dialog=true;\n                if (err.response) {\n                    this.message=err.response.data.message;\n                }else{\n                    this.message='Error en la respuesta';\n                }\n            });\n        }\n    },\n    created(){\n        this.init();\n    }\n}\n</script>"]}]}