{"remainingRequest":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/Reports.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/Reports.vue","mtime":1635297296000},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/babel-loader/lib/index.js","mtime":1635304629563},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js","mtime":1635304629775}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgU2VhcmNoIGZyb20gJ0AvY29tcG9uZW50cy9hZG1pbi9TZWFyY2hEYXRlJzsKaW1wb3J0IHsgbWRpRGF0YWJhc2VSZWZyZXNofSBmcm9tICdAbWRpL2pzJzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIGNvbXBvbmVudHM6ewogICAgICAgIFNlYXJjaAogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICByZXBvcnRzOltdLAogICAgICAgICAgICBzY3JvbGxCb3R0b206ZmFsc2UsCiAgICAgICAgICAgIGljb25EYXRhYmFzZTptZGlEYXRhYmFzZVJlZnJlc2gsCgogICAgICAgICAgICBza2lwOjAsCiAgICAgICAgICAgIGxpbWl0OjEwLAogICAgICAgICAgICBjYWxsQXBpOnRydWUsCgogICAgICAgICAgICBkYXRlMTonJywKICAgICAgICAgICAgZGF0ZTI6JycsCiAgICAgICAgICAgIG1lc3NhZ2U6JycsCiAgICAgICAgICAgIGltZ0E6JycsCiAgICAgICAgICAgIGRpYWxvZzpmYWxzZQogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkICgpIHsKICAgICAgICB0aGlzLnNjcm9sbCgpOwogICAgfSwKICAgIGNvbXB1dGVkOnsKICAgICAgICBkYXRlUmFuZ2VUZXh0KCl7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVzWzBdKycgJyt0aGlzLmRhdGVzWzFdOwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICBub3coeCl7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRtb21lbnQoeCkuZnJvbU5vdygpOwogICAgICAgIH0sCiAgICAgICAgbm93Mih4KXsKICAgICAgICAgICAgbGV0IGRhdGVkPW5ldyBEYXRlKHgpOwogICAgICAgICAgICByZXR1cm4gZGF0ZWQuZ2V0VVRDRnVsbFllYXIoKSsnLScrKGRhdGVkLmdldFVUQ01vbnRoKCkgKyAxKSsnLScrZGF0ZWQuZ2V0VVRDRGF0ZSgpOwogICAgICAgIH0sCiAgICAgICAgc2Nyb2xsKCl7CiAgICAgICAgICAgIHdpbmRvdy5vbnNjcm9sbCA9ICgpID0+IHsKICAgICAgICAgICAgICAgIGxldCBib3R0b21PZldpbmRvdyA9IE1hdGgubWF4KHdpbmRvdy5wYWdlWU9mZnNldCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApICsgd2luZG93LmlubmVySGVpZ2h0ID09PSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0OwogICAgICAgICAgICAgICAgaWYgKGJvdHRvbU9mV2luZG93JiZ0aGlzLmNhbGxBcGkpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbEJvdHRvbT10cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBpbml0KCl7CiAgICAgICAgICAgIGlmKCF0aGlzLmNhbGxBcGkpcmV0dXJuOwogICAgICAgICAgICB0aGlzLmNhbGxBcGk9ZmFsc2U7CiAgICAgICAgICAgIHRoaXMuYXhpb3MoewogICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgICAgIGRhdGE6bnVsbCwKICAgICAgICAgICAgICAgIHVybDonL3JlcG9ydD9za2lwPScrdGhpcy5za2lwKycmbGltaXQ9Jyt0aGlzLmxpbWl0KycmZGF0ZTE9Jyt0aGlzLmRhdGUxKycmZGF0ZTI9Jyt0aGlzLmRhdGUyLAogICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlPT5yZXNwb25zZS5kYXRhKQogICAgICAgICAgICAudGhlbihyZXNwPT57CiAgICAgICAgICAgICAgICB0aGlzLnJlcG9ydHM9dGhpcy5yZXBvcnRzLmNvbmNhdChyZXNwKTsKICAgICAgICAgICAgICAgIHRoaXMuY2FsbEFwaT10cnVlOwogICAgICAgICAgICAgICAgaWYocmVzcC5sZW5ndGg9PTApdGhpcy5jYWxsQXBpPWZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5za2lwKz10aGlzLmxpbWl0OwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZXJyPT57CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIHRvSW1nKHgpewogICAgICAgICAgICB0aGlzLmRpYWxvZz10cnVlOwogICAgICAgICAgICB0aGlzLmltZ0E9eDsKICAgICAgICB9LAogICAgICAgIGRhdGVSYW5nZShvYil7CiAgICAgICAgICAgIGxldCBhcnI9b2IuZGF0ZTsKICAgICAgICAgICAgbGV0IHZhbDE9bmV3IERhdGUoYXJyWzBdKTsKICAgICAgICAgICAgbGV0IHZhbDI9bmV3IERhdGUoYXJyWzFdKTsKICAgICAgICAgICAgaWYoIWlzTmFOKHZhbDEuZ2V0VGltZSgpKSYmIWlzTmFOKHZhbDIuZ2V0VGltZSgpKSl7CiAgICAgICAgICAgICAgICB0aGlzLmRhdGUxPWFyclswXTsKICAgICAgICAgICAgICAgIHRoaXMuZGF0ZTI9YXJyWzFdOwogICAgICAgICAgICAgICAgdGhpcy5za2lwPTA7CiAgICAgICAgICAgICAgICB0aGlzLmNhbGxBcGk9dHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMucmVwb3J0cz1bXTsKICAgICAgICAgICAgICAgIHRoaXMuaW5pdCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKXsKICAgICAgICB0aGlzLmluaXQoKTsKICAgIH0KfQo="},{"version":3,"sources":["Reports.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Reports.vue","sourceRoot":"src/views/admin/data","sourcesContent":["<template @scroll=\"scrollhome\">\n    <v-container>\n        <v-row>\n            <v-col cols=\"12\">\n                <h1>Detalle de ventas:</h1>\n            </v-col>\n            <v-col cols=\"12\">\n                <Search\n                    :lab=\"'Busca el reporte entre rango de fechas...'\"\n                    @date-range=\"dateRange\"\n                />\n            </v-col>\n            <v-col cols=\"12\" v-if=\"reports.length==0\" class=\"d-flex justify-center\">\n                <v-icon size=\"200\" color=\"accent\">{{iconDatabase}}</v-icon>\n            </v-col>\n            <v-col cols=\"12\" v-else>\n                <v-simple-table>\n                    <template v-slot:default>\n                        <thead>\n                            <tr>\n                                <th class=\"text-left\">\n                                    Nro\n                                </th>\n                                <th class=\"text-left\">\n                                    Fecha\n                                </th>\n                                <th class=\"text-left\">\n                                    Admin (Generó el qr de pago)\n                                </th>\n                                <th class=\"text-left\">\n                                    Cliente\n                                </th>\n                                <th class=\"text-left\">\n                                    Producto\n                                </th>\n                                <th class=\"text-left\">\n                                    Precio\n                                </th>\n                                <th class=\"text-left\">\n                                    Cantidad\n                                </th>\n                                <th class=\"text-left\">\n                                    Total\n                                </th>\n                                <th class=\"text-left\">\n                                    Imagen\n                                </th>\n                                <th class=\"text-left\">\n                                    La garantía comenzó\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                        <tr\n                            v-for=\"(item,index) in reports\"\n                            :key=\"index\"\n                        >\n                            <td>{{index+1}}</td>\n                            <td>{{ now2(item.date) }}</td>\n                            <td>{{ item.adminName }}</td>\n                            <td>{{ item.userName }}</td>\n                            <td>{{ item.product.name }}</td>\n                            <td>{{ item.product.price }}</td>\n                            <td>{{ item.product.quantity }}</td>\n                            <td>{{ item.product.price*item.product.quantity }}</td>\n                            <td><v-img width=\"70\" height=\"70\" :src=\"item.product.defaultImg\" @click=\"toImg(item.product.defaultImg)\" style=\"cursor:pointer\"></v-img></td>\n                            <td>{{ now(item.product.date) }}</td>\n                        </tr>\n                        </tbody>\n                    </template>\n                </v-simple-table>\n            </v-col>\n        </v-row>\n        <v-dialog\n            v-model=\"dialog\"\n            width=\"400\"\n        >\n            <v-card>\n                <v-img :src=\"imgA\" height=\"400\"></v-img>\n            </v-card>\n        </v-dialog>\n    </v-container>\n</template>\n\n<script>\n\nimport Search from '@/components/admin/SearchDate';\nimport { mdiDatabaseRefresh} from '@mdi/js';\n\nexport default {\n    components:{\n        Search\n    },\n    data() {\n        return{\n            reports:[],\n            scrollBottom:false,\n            iconDatabase:mdiDatabaseRefresh,\n\n            skip:0,\n            limit:10,\n            callApi:true,\n\n            date1:'',\n            date2:'',\n            message:'',\n            imgA:'',\n            dialog:false\n        }\n    },\n    mounted () {\n        this.scroll();\n    },\n    computed:{\n        dateRangeText(){\n            return this.dates[0]+' '+this.dates[1];\n        }\n    },\n    methods:{\n        now(x){\n            return this.$moment(x).fromNow();\n        },\n        now2(x){\n            let dated=new Date(x);\n            return dated.getUTCFullYear()+'-'+(dated.getUTCMonth() + 1)+'-'+dated.getUTCDate();\n        },\n        scroll(){\n            window.onscroll = () => {\n                let bottomOfWindow = Math.max(window.pageYOffset, document.documentElement.scrollTop, document.body.scrollTop) + window.innerHeight === document.documentElement.offsetHeight;\n                if (bottomOfWindow&&this.callApi) {\n                    this.scrollBottom=true;\n                    this.init();\n                }\n            }\n        },\n        init(){\n            if(!this.callApi)return;\n            this.callApi=false;\n            this.axios({\n                method: 'GET',\n                data:null,\n                url:'/report?skip='+this.skip+'&limit='+this.limit+'&date1='+this.date1+'&date2='+this.date2,\n            }).then(response=>response.data)\n            .then(resp=>{\n                this.reports=this.reports.concat(resp);\n                this.callApi=true;\n                if(resp.length==0)this.callApi=false;\n                this.skip+=this.limit;\n            })\n            .catch(err=>{\n                console.log(err);\n            });\n        },\n        toImg(x){\n            this.dialog=true;\n            this.imgA=x;\n        },\n        dateRange(ob){\n            let arr=ob.date;\n            let val1=new Date(arr[0]);\n            let val2=new Date(arr[1]);\n            if(!isNaN(val1.getTime())&&!isNaN(val2.getTime())){\n                this.date1=arr[0];\n                this.date2=arr[1];\n                this.skip=0;\n                this.callApi=true;\n                this.reports=[];\n                this.init();\n            }\n        }\n    },\n    created(){\n        this.init();\n    }\n}\n</script>"]}]}