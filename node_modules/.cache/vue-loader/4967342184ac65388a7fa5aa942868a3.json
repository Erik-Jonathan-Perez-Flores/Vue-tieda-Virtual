{"remainingRequest":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/Quot.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/Quot.vue","mtime":1635297296000},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/babel-loader/lib/index.js","mtime":1635304629563},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js","mtime":1635304629775}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgeyBtZGlDYXJkQWNjb3VudERldGFpbHNTdGFyT3V0bGluZSwgbWRpRGF0YWJhc2VSZWZyZXNoIH0gZnJvbSAnQG1kaS9qcyc7CmltcG9ydCBxcyBmcm9tICdxcyc7CmltcG9ydCBEaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL0RpYWxvZ01lc3NhZ2UnOwppbXBvcnQgU2VhcmNoIGZyb20gJ0AvY29tcG9uZW50cy9hZG1pbi9TZWFyY2hDb3RpemF0aW9uJzsKCgpleHBvcnQgZGVmYXVsdCB7CiAgICBjb21wb25lbnRzOnsKICAgICAgICBEaWFsb2csU2VhcmNoCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHF1b3RzOltdLAogICAgICAgICAgICBpY29uOm1kaUNhcmRBY2NvdW50RGV0YWlsc1N0YXJPdXRsaW5lLAogICAgICAgICAgICBzY3JvbGxCb3R0b206ZmFsc2UsCiAgICAgICAgICAgIGRpYWxvZzpmYWxzZSwKICAgICAgICAgICAgaWNvbkRhdGFiYXNlOm1kaURhdGFiYXNlUmVmcmVzaCwKCiAgICAgICAgICAgIHNraXA6MCwKICAgICAgICAgICAgbGltaXQ6MTAsCiAgICAgICAgICAgIGNhbGxBcGk6dHJ1ZSwKCiAgICAgICAgICAgIGRpYWxvZzpmYWxzZSwKICAgICAgICAgICAgbWVzc2FnZTonJywKICAgICAgICAgICAgcmVkaXI6ZmFsc2UsCiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQgKCkgewogICAgICAgIHRoaXMuc2Nyb2xsKCk7CiAgICB9LAogICAgbWV0aG9kczp7CiAgICAgICAgc2Nyb2xsKCl7CiAgICAgICAgICAgIHdpbmRvdy5vbnNjcm9sbCA9ICgpID0+IHsKICAgICAgICAgICAgICAgIGxldCBib3R0b21PZldpbmRvdyA9IE1hdGgubWF4KHdpbmRvdy5wYWdlWU9mZnNldCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApICsgd2luZG93LmlubmVySGVpZ2h0ID09PSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0OwogICAgICAgICAgICAgICAgaWYgKGJvdHRvbU9mV2luZG93KSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxCb3R0b209dHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdG9RdW90KGlkKXsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9kZXRhaWxzcXVvdC8nK2lkKTsKICAgICAgICB9LAogICAgICAgIGluaXQoKXsKICAgICAgICAgICAgaWYoIXRoaXMuY2FsbEFwaSlyZXR1cm47CiAgICAgICAgICAgIHRoaXMuY2FsbEFwaT1mYWxzZTsKICAgICAgICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgZGF0YTpudWxsLAogICAgICAgICAgICAgICAgdXJsOicvY290ej9za2lwPScrdGhpcy5za2lwKycmbGltaXQ9Jyt0aGlzLmxpbWl0LAogICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlPT5yZXNwb25zZS5kYXRhKQogICAgICAgICAgICAudGhlbihyZXNwPT57CiAgICAgICAgICAgICAgICB0aGlzLnF1b3RzPXJlc3A7CiAgICAgICAgICAgICAgICB0aGlzLmNhbGxBcGk9dHJ1ZTsKICAgICAgICAgICAgICAgIGlmKHJlc3AubGVuZ3RoPT0wKXRoaXMuY2FsbEFwaT1mYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuc2tpcCs9dGhpcy5saW1pdDsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGVycj0+ewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBhY3RpdmVTdGF0ZShpdGVtKXsKICAgICAgICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLAogICAgICAgICAgICAgICAgZGF0YTpxcy5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgIHN0YXRlOml0ZW0uc3RhdGUKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdXJsOicvY290ei8nK2l0ZW0uX2lkLAogICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlPT57CiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZz10cnVlOwogICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlPXJlc3BvbnNlLmRhdGEubWVzc2FnZSsnJzsKICAgICAgICAgICAgICAgIHRoaXMucmVkaXI9cmVzcG9uc2UuZGF0YS5zdGF0dXM7CiAgICAgICAgICAgIH0pLmNhdGNoKGVycj0+ewogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2c9dHJ1ZTsKICAgICAgICAgICAgICAgIGlmIChlcnIucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2U9ZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZT0nRXJyb3IgZW4gbGEgcmVzcHVlc3RhJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBvaygpewogICAgICAgICAgICB0aGlzLmRpYWxvZz1mYWxzZTsKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpewogICAgICAgIHRoaXMuaW5pdCgpOwogICAgfQp9Cg=="},{"version":3,"sources":["Quot.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Quot.vue","sourceRoot":"src/views/admin/data","sourcesContent":["<template @scroll=\"scrollhome\">\n    <v-container>\n        <v-row>\n            <v-col cols=\"12\">\n                <h1>Lista de cotizaciones:</h1>\n            </v-col>\n            <v-col cols=\"12\">\n                <Search/>\n            </v-col>\n            <v-col cols=\"12\" v-if=\"quots.length==0\" class=\"d-flex justify-center\">\n                <v-icon size=\"200\" color=\"accent\">{{iconDatabase}}</v-icon>\n            </v-col>\n            <v-col cols=\"12\" v-else>\n                <v-simple-table>\n                    <template v-slot:default>\n                        <thead>\n                        <tr>\n                            <th class=\"text-left\">\n                                Nro\n                            </th>\n                            <th class=\"text-left\">\n                                Nombre\n                            </th>\n                            <th class=\"text-left\">\n                                Correo\n                            </th>\n                            <th class=\"text-left\">\n                                Atendido NO/SI\n                            </th>\n                            <th class=\"text-left\">\n                                Responder\n                            </th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr\n                            v-for=\"(item,index) in quots\"\n                            :key=\"index\"\n                        >\n                            <td>{{index+1}}</td>\n                            <td>{{ item.name }}</td>\n                            <td>{{ item.email }}</td>\n                            <td>\n                                <v-switch\n                                    v-model=\"item.state\"\n                                    color=\"secondary\"\n                                    @click=\"activeState(item)\"\n                                ></v-switch>\n                            </td>\n                            <td>\n                                <v-btn text small @click=\"toQuot(item._id)\">\n                                    <v-icon color=\"accent\">{{icon}}</v-icon>\n                                </v-btn>\n                            </td>\n                        </tr>\n                        </tbody>\n                    </template>\n                </v-simple-table>\n            </v-col>\n        </v-row>\n        <Dialog\n            :message=\"message\"\n            :dialog=\"dialog\"\n            :redir=\"redir\"\n            @ok-template=\"ok\"\n        />\n    </v-container>\n</template>\n\n<script>\n\nimport { mdiCardAccountDetailsStarOutline, mdiDatabaseRefresh } from '@mdi/js';\nimport qs from 'qs';\nimport Dialog from '@/components/DialogMessage';\nimport Search from '@/components/admin/SearchCotization';\n\n\nexport default {\n    components:{\n        Dialog,Search\n    },\n    data() {\n        return{\n            quots:[],\n            icon:mdiCardAccountDetailsStarOutline,\n            scrollBottom:false,\n            dialog:false,\n            iconDatabase:mdiDatabaseRefresh,\n\n            skip:0,\n            limit:10,\n            callApi:true,\n\n            dialog:false,\n            message:'',\n            redir:false,\n        }\n    },\n    mounted () {\n        this.scroll();\n    },\n    methods:{\n        scroll(){\n            window.onscroll = () => {\n                let bottomOfWindow = Math.max(window.pageYOffset, document.documentElement.scrollTop, document.body.scrollTop) + window.innerHeight === document.documentElement.offsetHeight;\n                if (bottomOfWindow) {\n                    this.scrollBottom=true;\n                    this.init();\n                }\n            }\n        },\n        toQuot(id){\n            this.$router.push('/detailsquot/'+id);\n        },\n        init(){\n            if(!this.callApi)return;\n            this.callApi=false;\n            this.axios({\n                method: 'GET',\n                data:null,\n                url:'/cotz?skip='+this.skip+'&limit='+this.limit,\n            }).then(response=>response.data)\n            .then(resp=>{\n                this.quots=resp;\n                this.callApi=true;\n                if(resp.length==0)this.callApi=false;\n                this.skip+=this.limit;\n            })\n            .catch(err=>{\n                console.log(err);\n            });\n        },\n        activeState(item){\n            this.axios({\n                method: 'PUT',\n                data:qs.stringify({\n                    state:item.state\n                }),\n                url:'/cotz/'+item._id,\n            }).then(response=>{\n                this.dialog=true;\n                this.message=response.data.message+'';\n                this.redir=response.data.status;\n            }).catch(err=>{\n                this.dialog=true;\n                if (err.response) {\n                    this.message=err.response.data.message;\n                }else{\n                    this.message='Error en la respuesta';\n                }\n            });\n        },\n        ok(){\n            this.dialog=false;\n        }\n    },\n    created(){\n        this.init();\n    }\n}\n</script>"]}]}