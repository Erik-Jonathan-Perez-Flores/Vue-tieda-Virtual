{"remainingRequest":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/HomeAdmin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/HomeAdmin.vue","mtime":1635297296000},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/babel-loader/lib/index.js","mtime":1635304629563},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js","mtime":1635304629775}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgeyBtZGlEZWxldGUsbWRpRGF0YWJhc2VSZWZyZXNoIH0gZnJvbSAnQG1kaS9qcyc7CmltcG9ydCB7bWFwU3RhdGV9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgRGlhbG9nIGZyb20gJ0AvY29tcG9uZW50cy9EaWFsb2dNZXNzYWdlJzsKaW1wb3J0IERlbmllZCBmcm9tICdAL2NvbXBvbmVudHMvRGVuaWVkT3BlcmF0aW9uJzsKaW1wb3J0IFNlYXJjaCBmcm9tICdAL2NvbXBvbmVudHMvYWRtaW4vU2VhcmNoJzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIGNvbXBvbmVudHM6ewogICAgICAgIERpYWxvZyxEZW5pZWQsU2VhcmNoCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHVzZXJzOltdLAogICAgICAgICAgICBoZWFkZXJzOltdLAogICAgICAgICAgICBpY29uOm1kaURlbGV0ZSwKICAgICAgICAgICAgc2Nyb2xsQm90dG9tOmZhbHNlLAogICAgICAgICAgICBkaWFsb2c6ZmFsc2UsCiAgICAgICAgICAgIGRpYWxvZ01lc3NhZ2U6ZmFsc2UsCiAgICAgICAgICAgIGlkRGVsZXRlOicnLAogICAgICAgICAgICBucm86MCwKICAgICAgICAgICAgbWVzc2FnZTonJywKICAgICAgICAgICAgaWNvbkRhdGFiYXNlOm1kaURhdGFiYXNlUmVmcmVzaCwKCiAgICAgICAgICAgIHNlYXJjaDonJywKICAgICAgICAgICAgc2tpcDowLAogICAgICAgICAgICBsaW1pdDoxMCwKICAgICAgICAgICAgY2FsbEFwaTp0cnVlLAogICAgICAgIH0KICAgIH0sIAogICAgbW91bnRlZCAoKSB7CiAgICAgICAgdGhpcy5zY3JvbGwoKTsKICAgIH0sCiAgICBjb21wdXRlZDp7CiAgICAgICAgLi4ubWFwU3RhdGUoWydzZXNzaW9uJ10pLAogICAgICAgIHVzZXJEZWxldGUoKXsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5hZG1pbi51c2VyOwogICAgICAgIH0sCiAgICAgICAgdXNlcnNMaXN0KCl7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlc3Npb24uYWRtaW4uYXZhaWJsZTsKICAgICAgICB9LAogICAgICAgIGFyclVzZXJzKCl7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnVzZXJzOwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICBzY3JvbGwoKXsKICAgICAgICAgICAgd2luZG93Lm9uc2Nyb2xsID0gKCkgPT4gewogICAgICAgICAgICAgICAgbGV0IGJvdHRvbU9mV2luZG93ID0gTWF0aC5tYXgod2luZG93LnBhZ2VZT2Zmc2V0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCkgKyB3aW5kb3cuaW5uZXJIZWlnaHQgPT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQ7CiAgICAgICAgICAgICAgICBpZiAoYm90dG9tT2ZXaW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbEJvdHRvbT10cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBpbml0KCl7CiAgICAgICAgICAgIGlmKCF0aGlzLmNhbGxBcGkpcmV0dXJuOwogICAgICAgICAgICB0aGlzLmNhbGxBcGk9ZmFsc2U7CiAgICAgICAgICAgIHRoaXMuYXhpb3MoewogICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgICAgIGRhdGE6bnVsbCwKICAgICAgICAgICAgICAgIHVybDonL3VzZXIvb25seXVzZXJzP3NraXA9Jyt0aGlzLnNraXArJyZsaW1pdD0nK3RoaXMubGltaXQrJyZzZWFyY2g9Jyt0aGlzLnNlYXJjaCwKICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZT0+ewogICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5sZW5ndGg9PTApewogICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsbEFwaT1mYWxzZTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmNhbGxBcGk9dHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMudXNlcnM9dGhpcy51c2Vycy5jb25jYXQocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB0aGlzLnNraXArPXRoaXMubGltaXQ7CiAgICAgICAgICAgIH0pLmNhdGNoKGVycj0+ewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBkZWxldGVVc2VyKCl7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nPWZhbHNlOwogICAgICAgICAgICB0aGlzLmF4aW9zKHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsCiAgICAgICAgICAgICAgICBkYXRhOm51bGwsCiAgICAgICAgICAgICAgICB1cmw6Jy91c2VyL2RlbGV0ZXVzZXIvJyt0aGlzLmlkRGVsZXRlLAogICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlPT5yZXNwb25zZS5kYXRhKQogICAgICAgICAgICAudGhlbihyZXNwPT57CiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ01lc3NhZ2U9dHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZT1yZXNwLm1lc3NhZ2U7CiAgICAgICAgICAgICAgICB0aGlzLnVzZXJzLnNwbGljZSh0aGlzLm5ybywxKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGVycj0+ewogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dNZXNzYWdlPXRydWU7CiAgICAgICAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlPWVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2U9J0Vycm9yIGVuIGxhIHJlc3B1ZXN0YSc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgb2soKXsKICAgICAgICAgICAgdGhpcy5kaWFsb2dNZXNzYWdlPWZhbHNlOwogICAgICAgIH0sCiAgICAgICAgdGV4dFF1ZXJ5KG9iKXsKICAgICAgICAgICAgdGhpcy5zZWFyY2g9b2IudGV4dDsKICAgICAgICAgICAgdGhpcy5za2lwPTA7CiAgICAgICAgICAgIHRoaXMuY2FsbEFwaT10cnVlOwogICAgICAgICAgICB0aGlzLnVzZXJzPVtdOwogICAgICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICB9LAogICAgICAgIGRlbGV0ZUJ0bihpZCxuKXsKICAgICAgICAgICAgdGhpcy5kaWFsb2c9dHJ1ZTsKICAgICAgICAgICAgdGhpcy5pZERlbGV0ZT1pZDsKICAgICAgICAgICAgdGhpcy5ucm89bjsKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpewogICAgICAgIHRoaXMuaW5pdCgpOwogICAgfQp9Cg=="},{"version":3,"sources":["HomeAdmin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HomeAdmin.vue","sourceRoot":"src/views/admin/data","sourcesContent":["<template @scroll=\"scrollhome\">\n    <v-container>\n        <v-row>\n            <v-col cols=\"12\">\n                <h1>Lista de usuarios:</h1>\n            </v-col>\n            <v-col cols=\"12\">\n                <Search\n                    :place=\"'Busca algún usuario...'\"\n                    @search-text=\"textQuery\"\n                />\n            </v-col>\n            <v-col cols=\"12\" v-if=\"arrUsers.length>0\">\n                <v-simple-table v-if=\"usersList\">\n                    <template v-slot:default>\n                        <thead>\n                        <tr>\n                            <th class=\"text-left\">\n                                Nro\n                            </th>\n                            <th class=\"text-left\">\n                                Nombre\n                            </th>\n                            <th class=\"text-left\">\n                                Correo\n                            </th>\n                            <th class=\"text-left\">\n                                Teléfono\n                            </th>\n                            <th class=\"text-left\">\n                                Compras\n                            </th>\n                            <th class=\"text-left\">\n                                Acción\n                            </th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr\n                            v-for=\"(item,index) in arrUsers\"\n                            :key=\"index\"\n                        >\n                            <td>{{index+1}}</td>\n                            <td>{{ item.name }}</td>\n                            <td>{{ item.email }}</td>\n                            <td>{{ item.phone }}</td>\n                            <td>{{ item.buys }}</td>\n                            <td>\n                                <v-btn text small @click=\"deleteBtn(item._id,index)\" v-if=\"userDelete\">\n                                    <v-icon color=\"accent\">{{icon}}</v-icon>\n                                </v-btn>\n                            </td>\n                        </tr>\n                        </tbody>\n                    </template>\n                </v-simple-table>\n                <Denied v-else />\n            </v-col>\n            <v-col cols=\"12\" class=\"d-flex justify-center\" v-else>\n                <v-icon size=\"200\" color=\"accent\">{{iconDatabase}}</v-icon>\n            </v-col>\n        </v-row>\n        <v-dialog\n            v-model=\"dialog\"\n            width=\"300\"\n        >\n            <v-card class=\"pa-5\" color=\"accent\">\n                <v-card-text>\n                    <h1 class=\"white--text text-center\">¿Está seguro de eliminar el usuario?</h1>\n                </v-card-text>\n                <v-card-actions>\n                    <v-btn small color=\"secondary\" class=\"text-capitalize\" @click=\"dialog=false\">Cancelar</v-btn>\n                    <v-divider></v-divider>\n                    <v-btn small color=\"secondary\" class=\"text-capitalize\" @click=\"deleteUser\">Eliminar</v-btn>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n        <Dialog\n            :message=\"message\"\n            :dialog=\"dialogMessage\"\n            :redir=\"true\"\n            @ok-template=\"ok\"\n        />\n    </v-container>\n</template>\n\n<script>\n\nimport { mdiDelete,mdiDatabaseRefresh } from '@mdi/js';\nimport {mapState} from 'vuex';\nimport Dialog from '@/components/DialogMessage';\nimport Denied from '@/components/DeniedOperation';\nimport Search from '@/components/admin/Search';\n\nexport default {\n    components:{\n        Dialog,Denied,Search\n    },\n    data() {\n        return{\n            users:[],\n            headers:[],\n            icon:mdiDelete,\n            scrollBottom:false,\n            dialog:false,\n            dialogMessage:false,\n            idDelete:'',\n            nro:0,\n            message:'',\n            iconDatabase:mdiDatabaseRefresh,\n\n            search:'',\n            skip:0,\n            limit:10,\n            callApi:true,\n        }\n    }, \n    mounted () {\n        this.scroll();\n    },\n    computed:{\n        ...mapState(['session']),\n        userDelete(){\n            return this.session.admin.user;\n        },\n        usersList(){\n            return this.session.admin.avaible;\n        },\n        arrUsers(){\n            return this.users;\n        }\n    },\n    methods:{\n        scroll(){\n            window.onscroll = () => {\n                let bottomOfWindow = Math.max(window.pageYOffset, document.documentElement.scrollTop, document.body.scrollTop) + window.innerHeight === document.documentElement.offsetHeight;\n                if (bottomOfWindow) {\n                    this.scrollBottom=true;\n                    this.init();\n                }\n            }\n        },\n        init(){\n            if(!this.callApi)return;\n            this.callApi=false;\n            this.axios({\n                method: 'GET',\n                data:null,\n                url:'/user/onlyusers?skip='+this.skip+'&limit='+this.limit+'&search='+this.search,\n            }).then(response=>{\n                if(response.data.length==0){\n                    this.callApi=false;\n                    return;\n                }\n                this.callApi=true;\n                this.users=this.users.concat(response.data);\n                this.skip+=this.limit;\n            }).catch(err=>{\n                console.log(err);\n            });\n        },\n        deleteUser(){\n            this.dialog=false;\n            this.axios({\n                method: 'DELETE',\n                data:null,\n                url:'/user/deleteuser/'+this.idDelete,\n            }).then(response=>response.data)\n            .then(resp=>{\n                this.dialogMessage=true;\n                this.message=resp.message;\n                this.users.splice(this.nro,1);\n            })\n            .catch(err=>{\n                this.dialogMessage=true;\n                if (err.response) {\n                    this.message=err.response.data.message;\n                }else{\n                    this.message='Error en la respuesta';\n                }\n            });\n        },\n        ok(){\n            this.dialogMessage=false;\n        },\n        textQuery(ob){\n            this.search=ob.text;\n            this.skip=0;\n            this.callApi=true;\n            this.users=[];\n            this.init();\n        },\n        deleteBtn(id,n){\n            this.dialog=true;\n            this.idDelete=id;\n            this.nro=n;\n        }\n    },\n    created(){\n        this.init();\n    }\n}\n</script>"]}]}