{"remainingRequest":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/DetailsQuot.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/DetailsQuot.vue","mtime":1635297296000},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/babel-loader/lib/index.js","mtime":1635304629563},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js","mtime":1635304629775}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQge21hcFN0YXRlLG1hcE11dGF0aW9uc30gZnJvbSAndnVleCc7CmltcG9ydCBxcyBmcm9tICdxcyc7CmltcG9ydCBEaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL0RpYWxvZ01lc3NhZ2UnOwoKZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czp7CiAgICAgICAgRGlhbG9nCiAgICB9LAogICAgcHJvcHM6WydpZCddLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHByb2R1Y3RzOltdLAogICAgICAgICAgICB1c2VyOicnLAogICAgICAgICAgICBlbWFpbDonJywKICAgICAgICAgICAgcGhvbmU6JycsCiAgICAgICAgICAgIHJleHBvbnNlVGV4dDonJywKICAgICAgICAgICAgcmV4cG9uc2VUZXh0UnVsZXM6IFsKICAgICAgICAgICAgICAgIHYgPT4gISF2IHx8ICdFbCBjb21lbnRhcmlvIGVzIHJlcXVlcmlkbycsCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGNvbW1lbnRzOltdLAoKICAgICAgICAgICAgbWVzc2FnZTonJywKICAgICAgICAgICAgZGlhbG9nOmZhbHNlLAogICAgICAgICAgICByZWRpcjpmYWxzZSwKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczp7CiAgICAgICAgdG9FZGl0KGlkKXsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9wcm9kdWN0ZWRpdGFkbS8nK2lkKTsKICAgICAgICB9LAogICAgICAgIGltZyhpbWcpewogICAgICAgICAgICBjb25zb2xlLmxvZyhpbWcpOwogICAgICAgIH0sCiAgICAgICAgc2VuZENvbW1lbnQoKXsKICAgICAgICAgICAgaWYodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpewogICAgICAgICAgICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICAgICAgZGF0YTpxcy5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOnRoaXMucmV4cG9uc2VUZXh0CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgdXJsOicvY290ei9tYWlsLycrdGhpcy5pZCwKICAgICAgICAgICAgICAgIH0pLnRoZW4ocmVzcG9uc2U9PnJlc3BvbnNlLmRhdGEpCiAgICAgICAgICAgICAgICAudGhlbihyZXNwPT57CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2c9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2U9cmVzcC5tZXNzYWdlKycnOwogICAgICAgICAgICAgICAgICAgIHRoaXMucmVkaXI9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1lbnRzLnB1c2gocmVzcC5kYXRhKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJleHBvbnNlVGV4dD0nJzsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyPT57CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2c9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZT1lcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2U9J0Vycm9yIGVuIGxhIHJlc3B1ZXN0YSc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgaW5pdCgpewogICAgICAgICAgICB0aGlzLmF4aW9zKHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICAgICAgICBkYXRhOm51bGwsCiAgICAgICAgICAgICAgICB1cmw6Jy9jb3R6L2dldEFuLycrdGhpcy5pZCwKICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZT0+cmVzcG9uc2UuZGF0YS5kYXRhKQogICAgICAgICAgICAudGhlbihyZXNwPT57CiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RzPXJlc3AucHJvZHVjdHM7CiAgICAgICAgICAgICAgICB0aGlzLnVzZXI9cmVzcC5uYW1lOwogICAgICAgICAgICAgICAgdGhpcy5lbWFpbD1yZXNwLmVtYWlsOwogICAgICAgICAgICAgICAgdGhpcy5waG9uZT1yZXNwLnBob25lOwogICAgICAgICAgICAgICAgdGhpcy5jb21tZW50cz1yZXNwLmNvbW1lbnRzOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZXJyPT57CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIG5vdyh4KXsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1vbWVudCh4KS5mcm9tTm93KCk7CiAgICAgICAgfSwKICAgICAgICBvaygpewogICAgICAgICAgICB0aGlzLmRpYWxvZz1mYWxzZTsKICAgICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6ewogICAgICAgIG1vbnQoKXsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvZHVjdHMucmVkdWNlKChhLGIpPT57cmV0dXJuIGErYi5wcmljZSpiLnF1YW50aXR5fSwwKTsKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpewogICAgICAgIHRoaXMuaW5pdCgpOwogICAgfQp9Cg=="},{"version":3,"sources":["DetailsQuot.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DetailsQuot.vue","sourceRoot":"src/views/admin/data","sourcesContent":["<template>\n    <v-container>\n        <v-row>\n            <v-col cols=\"12\">\n                <h1>Cotizaciones:</h1>\n                <p class=\"text-justify\">(El precio de los productos es el precio al momento de añadir al carrito del cliente)</p>\n            </v-col>\n            <v-col cols=\"12\">\n                <v-row justify=\"center\">\n                    <v-card \n                        width=\"250\" \n                        elevation=\"15\" \n                        class=\"ma-2\" \n                        v-for=\"(item,index) in products\" \n                        :key=\"index\"\n                        @click=\"toEdit(item._id)\"\n                    >\n                        <img\n                            :src=\"item.defaultImg\"\n                            height=\"150\" width=\"250\"\n                        />\n                        <v-card-text>\n                            <v-row>\n                                <v-col cols=\"12\" class=\"pa-1\">\n                                    <h4>Nombre: {{item.name}}</h4>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"pa-1\">\n                                    <h4 >Cantidad: {{item.quantity}}</h4>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"pa-1\">\n                                    <h4 >Precio: {{item.price}}</h4>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"pa-1\">\n                                    <h4 >Fecha: {{ now(item.date)}}</h4>\n                                </v-col>\n                            </v-row>\n                        </v-card-text>\n                    </v-card>\n                </v-row>\n            </v-col>\n            <v-col cols=\"12\" class=\"d-flex justify-center\">\n                <v-card width=\"400\" elevation=\"15\" class=\"pa-3\">\n                    <v-card-text>\n                        <v-row>\n                            <v-col cols=\"12\">\n                                <h1 class=\"text-center\">Detalles de la cotización</h1>\n                            </v-col>\n                            <v-col cols=\"12\" class=\"pa-1\">\n                                <h4>Total: {{mont}}</h4>\n                            </v-col>\n                            <v-col cols=\"12\" class=\"pa-1\">\n                                <h4>Cliente: {{user}}</h4>\n                            </v-col>\n                            <v-col cols=\"12\" class=\"pa-1\">\n                                <h4>Correo: {{email}}</h4>\n                            </v-col>\n                            <v-col cols=\"12\" class=\"pa-1\">\n                                <h4>Teléfono: {{phone}}</h4>\n                            </v-col>\n                        </v-row>\n                    </v-card-text>\n                </v-card>\n            </v-col>\n            <v-col cols=\"12\">\n                \n                <v-row>\n                    <v-col cols=\"12\">\n                        <h1 class=\"text-center\">Comentarios del Admin al correo del cliente</h1>\n                        <p>Se recomienda solo enviar a lo mas 2 comentarios, para evitar confusiones tambien puede escribirle a su whatsapp {{phone}}</p>\n                    </v-col>\n                    <v-col cols=\"12\">\n                        <v-form ref=\"form\">\n                            <v-textarea\n                                outlined\n                                label=\"Envie una respuesta\"\n                                v-model=\"rexponseText\"\n                                :rules=\"rexponseTextRules\"\n                            >\n                            </v-textarea>\n                        </v-form>\n                    </v-col>\n                    <v-col cols=\"12\" class=\"d-flex justify-center\">\n                        <v-btn @click=\"sendComment\" large color=\"secondary\" class=\"text-capitalize\">Enviar Comentario</v-btn>\n                    </v-col>\n                    <v-col cols=\"12\">\n                        <v-card class=\"ma-1\" v-for=\"(item,j) in comments\" :key=\"j\" color=\"accent\">\n                            <v-card-text>\n                                <p class=\"white--text\">{{item.name}} : {{item.comment}}</p>\n                            </v-card-text>\n                        </v-card>\n                    </v-col>\n                </v-row>\n            </v-col>\n        </v-row>\n        <Dialog\n            :message=\"message\"\n            :dialog=\"dialog\"\n            :redir=\"redir\"\n            @ok-template=\"ok\"\n        />\n    </v-container>\n</template>\n\n<script>\n\nimport {mapState,mapMutations} from 'vuex';\nimport qs from 'qs';\nimport Dialog from '@/components/DialogMessage';\n\nexport default {\n    components:{\n        Dialog\n    },\n    props:['id'],\n    data() {\n        return{\n            products:[],\n            user:'',\n            email:'',\n            phone:'',\n            rexponseText:'',\n            rexponseTextRules: [\n                v => !!v || 'El comentario es requerido',\n            ],\n            comments:[],\n\n            message:'',\n            dialog:false,\n            redir:false,\n        }\n    },\n    methods:{\n        toEdit(id){\n            this.$router.push('/producteditadm/'+id);\n        },\n        img(img){\n            console.log(img);\n        },\n        sendComment(){\n            if(this.$refs.form.validate()){\n                this.axios({\n                    method: 'POST',\n                    data:qs.stringify({\n                        message:this.rexponseText\n                    }),\n                    url:'/cotz/mail/'+this.id,\n                }).then(response=>response.data)\n                .then(resp=>{\n                    this.dialog=true;\n                    this.message=resp.message+'';\n                    this.redir=true;\n                    this.comments.push(resp.data);\n                    this.rexponseText='';\n                })\n                .catch(err=>{\n                    this.dialog=true;\n                    if (err.response) {\n                        this.message=err.response.data.message;\n                    }else{\n                        this.message='Error en la respuesta';\n                    }\n                });\n            }else{\n                this.$refs.form.validate()\n            }\n        },\n        init(){\n            this.axios({\n                method: 'GET',\n                data:null,\n                url:'/cotz/getAn/'+this.id,\n            }).then(response=>response.data.data)\n            .then(resp=>{\n                this.products=resp.products;\n                this.user=resp.name;\n                this.email=resp.email;\n                this.phone=resp.phone;\n                this.comments=resp.comments;\n            })\n            .catch(err=>{\n                console.log(err);\n            });\n        },\n        now(x){\n            return this.$moment(x).fromNow();\n        },\n        ok(){\n            this.dialog=false;\n        }\n    },\n    computed:{\n        mont(){\n            return this.products.reduce((a,b)=>{return a+b.price*b.quantity},0);\n        }\n    },\n    created(){\n        this.init();\n    }\n}\n</script>"]}]}