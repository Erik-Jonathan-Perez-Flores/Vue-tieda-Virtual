{"remainingRequest":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/NewProduct.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/src/views/admin/data/NewProduct.vue","mtime":1635297296000},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/babel-loader/lib/index.js","mtime":1635304629563},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/cache-loader/dist/cjs.js","mtime":1635304628963},{"path":"/home/jonathan/Escritorio/Pruebas/Proyecto2.v/vue---front-master/node_modules/vue-loader/lib/index.js","mtime":1635304629775}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgSW1hZ2VzIGZyb20gJ0AvY29tcG9uZW50cy9hZG1pbi9EcmFnSW1hZ2VzJzsKaW1wb3J0IENhdGVnb3J5IGZyb20gJ0AvY29tcG9uZW50cy9hZG1pbi9TZWFyY2hDYXRlZ29yeSc7CmltcG9ydCB7bWFwU3RhdGUsbWFwTXV0YXRpb25zfSBmcm9tICd2dWV4JzsKaW1wb3J0IERpYWxvZyBmcm9tICdAL2NvbXBvbmVudHMvRGlhbG9nTWVzc2FnZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBjb21wb25lbnRzOnsKICAgICAgICBJbWFnZXMsQ2F0ZWdvcnksRGlhbG9nCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICBuYW1lUnVsZXM6IFsKICAgICAgICAgICAgICAgIHYgPT4gISF2IHx8ICdFbCBub21icmUgZXMgcmVxdWVyaWRvJywKICAgICAgICAgICAgXSwKICAgICAgICAgICAgcXVhbnRpdHk6ICcnLAogICAgICAgICAgICBxdWFudGl0eVJ1bGVzOiBbCiAgICAgICAgICAgICAgICB2ID0+ICEhdiB8fCAnTGEgY2FudGlkYWQgZXMgcmV1cXJpZGEnLAogICAgICAgICAgICBdLAogICAgICAgICAgICBwcmljZTogJycsCiAgICAgICAgICAgIHByaWNlUnVsZXM6IFsKICAgICAgICAgICAgICAgIHYgPT4gISF2IHx8ICdFbCBwcmVjaW8gZXMgcmVxdWVyaWRvJywKICAgICAgICAgICAgXSwKICAgICAgICAgICAgZGlzY291bnQ6ICcnLAogICAgICAgICAgICBkaXNjb3VudFJ1bGVzOiBbCiAgICAgICAgICAgICAgICB2ID0+ICEhdiB8fCAnRWwgZGVzY3VlbnRvIGVzIHJlcXVlcmlkbycsCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICAgICAgZGVzY3JpcHRpb25SdWxlczogWwogICAgICAgICAgICAgICAgdiA9PiAhIXYgfHwgJ0xhIGRlc2NyaXBjacOzbiBlcyByZXF1ZXJpZGEnLAogICAgICAgICAgICBdLAogICAgICAgICAgICBjYXRlZ29yeTonJywKICAgICAgICAgICAgbWVzc2FnZTonJywKICAgICAgICAgICAgZGlhbG9nOmZhbHNlLAogICAgICAgICAgICByZWRpcjpmYWxzZSwKICAgICAgICAgICAgZmlsZXNJbWc6W10KICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczp7CiAgICAgICAgY2F0KGRhdGEpewogICAgICAgICAgICB0aGlzLmNhdGVnb3J5PWRhdGEuX2lkP2RhdGEuX2lkOicnOwogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmNhdGVnb3J5KTsKICAgICAgICB9LAogICAgICAgIHNhdmVQcm9kdWN0KCl7CiAgICAgICAgICAgIGlmKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKXsKICAgICAgICAgICAgICAgIGlmKHRoaXMuZmlsZXNJbWcubGVuZ3RoPT0wKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZz10cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZT0nU2UgcmVxdWllcmUgYWwgbWVub3MgdW5hIGltYWdlbic7CiAgICAgICAgICAgICAgICB9ZWxzZSBpZih0aGlzLmNhdGVnb3J5PT0nJyl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2c9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2U9J1NlIHJlcXVpZXJlIGxhIGNhdGVnb3LDrGEgYSBsYSBxdWUgcGVydGVuZWNlIGVsIHByb2R1Y3RvJzsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGxldCBmb3JtRGF0YT1uZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ25hbWUnLHRoaXMubmFtZSk7CiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdwcmljZScsdGhpcy5wcmljZSk7CiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdkaXNjb3VudCcsdGhpcy5kaXNjb3VudCk7CiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdxdWFudGl0eScsdGhpcy5xdWFudGl0eSk7CiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdkZXNjcmlwdGlvbicsdGhpcy5kZXNjcmlwdGlvbik7CiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdjYXRlZ29yeScsdGhpcy5jYXRlZ29yeSk7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLmZpbGVzSW1nLmxlbmd0aDsgeCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmZpbGVzSW1nW3hdOwogICAgICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ltZycsZWxlbWVudCk7ICAgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMuYXhpb3MoewogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTpmb3JtRGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOicvcHJvZHVjdCcsCiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZT0+ewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZz10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2U9cmVzcG9uc2UuZGF0YS5tZXNzYWdlKycnOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZGlyPXJlc3BvbnNlLmRhdGEuc3RhdHVzOwogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVycj0+ewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZz10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2U9ZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2U9J0Vycm9yIGVuIGxhIHJlc3B1ZXN0YSc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb2soKXsKICAgICAgICAgICAgaWYodGhpcy5yZWRpcil7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3Byb2R1Y3RsaXN0YWRtJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5kaWFsb2c9ZmFsc2U7CiAgICAgICAgfSwKICAgICAgICBteUltYWdlcyhpbSl7CiAgICAgICAgICAgIHRoaXMuZmlsZXNJbWc9dGhpcy5maWxlc0ltZy5jb25jYXQoaW0uZGF0YSk7CiAgICAgICAgfSwKICAgICAgICByZW1vdmVJbWcob2JqKXsKICAgICAgICAgICAgdGhpcy5maWxlc0ltZy5zcGxpY2Uob2JqLnBvcywxKTsKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["NewProduct.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewProduct.vue","sourceRoot":"src/views/admin/data","sourcesContent":["<template>\n    <v-container class=\"d-flex justify-center\">\n        <v-card elevation=\"15\" width=\"700\">\n            <v-card-text>\n                <v-form\n                    ref=\"form\"\n                    lazy-validation\n                >\n                    <v-row>\n                        <v-col cols=\"12\" class=\"pa-1\">\n                            <h1 class=\"accent--text text-center\">Inserte sus imágenes</h1>\n                        </v-col>\n                        <v-col cols=\"12\" class=\"pa-1\">\n                            <Images\n                                @drag-images=\"myImages\"\n                                @remove-element=\"removeImg\"\n                            />\n                        </v-col>\n                        <v-col cols=\"12\" class=\"pa-1\">\n                            <v-text-field\n                                v-model=\"name\"\n                                :rules=\"nameRules\"\n                                label=\"Nombre\"\n                                dense\n                                outlined\n                            >\n                            </v-text-field>\n                        </v-col>\n                        <v-col cols=\"12\" sm=\"6\" class=\"pa-1\">\n                            <v-text-field\n                                v-model=\"quantity\"\n                                :rules=\"quantityRules\"\n                                label=\"Cantidad\"\n                                type=\"number\"\n                                dense\n                                outlined\n                            >\n                            </v-text-field>\n                        </v-col>\n                        <v-col cols=\"12\" sm=\"6\" class=\"pa-1\">\n                            <Category\n                                @charge-category=\"cat\"\n                            />\n                        </v-col>\n                        <v-col cols=\"12\" sm=\"6\" class=\"pa-1\">\n                            <v-text-field\n                                v-model=\"price\"\n                                :rules=\"priceRules\"\n                                label=\"Precio venta (BOB)\"\n                                dense\n                                outlined\n                            >\n                            </v-text-field>\n                        </v-col>\n                        <v-col cols=\"12\" sm=\"6\" class=\"pa-1\">\n                            <v-text-field\n                                v-model=\"discount\"\n                                :rules=\"discountRules\"\n                                label=\"Descuento (BOB)\"\n                                dense\n                                outlined\n                            >\n                            </v-text-field>\n                        </v-col>\n                        <v-col cols=\"12\" class=\"pa-1\">\n                            <v-textarea\n                                v-model=\"description\"\n                                :rules=\"descriptionRules\"\n                                label=\"Descripción\"\n                                dense\n                                outlined\n                            >\n                            </v-textarea>\n                        </v-col>\n                        \n                        <v-col cols=\"12\" class=\"d-flex justify-center\">\n                            <v-btn color=\"secondary\" large @click=\"saveProduct\">Guardar</v-btn>\n                        </v-col>\n                    </v-row>\n                </v-form>\n            </v-card-text>\n        </v-card>\n        <Dialog\n            :message=\"message\"\n            :dialog=\"dialog\"\n            :redir=\"redir\"\n            @ok-template=\"ok\"\n        />\n    </v-container>\n</template>\n\n\n<script>\n\nimport Images from '@/components/admin/DragImages';\nimport Category from '@/components/admin/SearchCategory';\nimport {mapState,mapMutations} from 'vuex';\nimport Dialog from '@/components/DialogMessage';\n\nexport default {\n    components:{\n        Images,Category,Dialog\n    },\n    data() {\n        return{\n            name: '',\n            nameRules: [\n                v => !!v || 'El nombre es requerido',\n            ],\n            quantity: '',\n            quantityRules: [\n                v => !!v || 'La cantidad es reuqrida',\n            ],\n            price: '',\n            priceRules: [\n                v => !!v || 'El precio es requerido',\n            ],\n            discount: '',\n            discountRules: [\n                v => !!v || 'El descuento es requerido',\n            ],\n            description: '',\n            descriptionRules: [\n                v => !!v || 'La descripción es requerida',\n            ],\n            category:'',\n            message:'',\n            dialog:false,\n            redir:false,\n            filesImg:[]\n        }\n    },\n    methods:{\n        cat(data){\n            this.category=data._id?data._id:'';\n            console.log(this.category);\n        },\n        saveProduct(){\n            if(this.$refs.form.validate()){\n                if(this.filesImg.length==0){\n                    this.dialog=true;\n                    this.message='Se requiere al menos una imagen';\n                }else if(this.category==''){\n                    this.dialog=true;\n                    this.message='Se requiere la categorìa a la que pertenece el producto';\n                }else{\n                    let formData=new FormData();\n                    formData.append('name',this.name);\n                    formData.append('price',this.price);\n                    formData.append('discount',this.discount);\n                    formData.append('quantity',this.quantity);\n                    formData.append('description',this.description);\n                    formData.append('category',this.category);\n                    for (let x = 0; x < this.filesImg.length; x++) {\n                        const element = this.filesImg[x];\n                        formData.append('img',element);   \n                    }\n                    this.axios({\n                        method: 'POST',\n                        data:formData,\n                        url:'/product',\n                    }).then(response=>{\n                        this.dialog=true;\n                        this.message=response.data.message+'';\n                        this.redir=response.data.status;\n                    }).catch(err=>{\n                        this.dialog=true;\n                        if (err.response) {\n                            this.message=err.response.data.message;\n                        }else{\n                            this.message='Error en la respuesta';\n                        }\n                    });\n                }\n            }else{\n                this.$refs.form.validate();\n            }\n        },\n        ok(){\n            if(this.redir){\n                this.$router.push('/productlistadm');\n            }\n            this.dialog=false;\n        },\n        myImages(im){\n            this.filesImg=this.filesImg.concat(im.data);\n        },\n        removeImg(obj){\n            this.filesImg.splice(obj.pos,1);\n        }\n    }\n}\n</script>"]}]}